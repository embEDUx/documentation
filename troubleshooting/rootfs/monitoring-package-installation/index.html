<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">

        <title>Rootfs/Monitoring Package Installation - embEDUx Project</title>

        <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../../css/prettify-1.0.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../../../index.html">embEDUx Project</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Usage <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../../usage/usage/index.html">Overview</a>
                        </li>
                    
                        <li >
                            <a href="../../../usage/common/build-monitoring/index.html">Common/Build Monitoring</a>
                        </li>
                    
                        <li >
                            <a href="../../../usage/uboot/index.html">Uboot</a>
                        </li>
                    
                        <li >
                            <a href="../../../usage/linux/index.html">Linux</a>
                        </li>
                    
                        <li >
                            <a href="../../../usage/rootfs/index.html">Rootfs</a>
                        </li>
                    
                        <li >
                            <a href="../../../usage/rootfs/advanced/run-containers/index.html">Rootfs/Advanced/Run Containers</a>
                        </li>
                    
                        <li >
                            <a href="../../../usage/rootfs/configuration.yml/index.html">Rootfs/Configuration.Yml</a>
                        </li>
                    
                        <li >
                            <a href="../../../usage/misc/index.html">Misc</a>
                        </li>
                    
                        <li >
                            <a href="../../../usage/flashtool/index.html">Flashtool</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Setup <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../../setup/setup/index.html">Overview</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/repositories/index.html">Repositories</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/adminstation/index.html">Adminstation</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/buildserver/index.html">Buildserver</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/buildserver/buildmaster/index.html">Buildserver/Buildmaster</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/buildserver/buildslaves/index.html">Buildserver/Buildslaves</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/buildserver/customize-buildslaves/index.html">Buildserver/Customize Buildslaves</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/buildserver/customize-supported-platforms/index.html">Buildserver/Customize Supported Platforms</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/post-install/toolchains/index.html">Post Install/Toolchains</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/post-install/user-documentation/index.html">Post Install/User Documentation</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/workstation/flashtool/index.html">Workstation/Flashtool</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/workstation/development/flashtool/index.html">Workstation/Development/Flashtool</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/examples/user-documentation-HTWG/index.html">Examples/User Documentation Htwg</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Background <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../../background/background/index.html">Overview</a>
                        </li>
                    
                        <li >
                            <a href="../../../background/requirements/index.html">Requirements</a>
                        </li>
                    
                        <li >
                            <a href="../../../background/design/index.html">Design</a>
                        </li>
                    
                        <li >
                            <a href="../../../background/design/architecture/index.html">Design/Architecture</a>
                        </li>
                    
                        <li >
                            <a href="../../../background/design/continuous-integration/index.html">Design/Continuous Integration</a>
                        </li>
                    
                        <li >
                            <a href="../../../background/design/flashtool/index.html">Design/Flashtool</a>
                        </li>
                    
                        <li >
                            <a href="../../../background/design/linux/index.html">Design/Linux</a>
                        </li>
                    
                        <li >
                            <a href="../../../background/design/misc/index.html">Design/Misc</a>
                        </li>
                    
                        <li >
                            <a href="../../../background/design/repositories-and-branches/index.html">Design/Repositories And Branches</a>
                        </li>
                    
                        <li >
                            <a href="../../../background/design/rootfs/index.html">Design/Rootfs</a>
                        </li>
                    
                        <li >
                            <a href="../../../background/design/toolchains/index.html">Design/Toolchains</a>
                        </li>
                    
                        <li >
                            <a href="../../../background/design/uboot/index.html">Design/Uboot</a>
                        </li>
                    
                        <li >
                            <a href="../../../background/eval/continuous-integration/index.html">Eval/Continuous Integration</a>
                        </li>
                    
                        <li >
                            <a href="../../../background/eval/flashtool/index.html">Eval/Flashtool</a>
                        </li>
                    
                        <li >
                            <a href="../../../background/eval/yocto-project/index.html">Eval/Yocto Project</a>
                        </li>
                    
                        <li >
                            <a href="../../../background/specs/flashtool/index.html">Specs/Flashtool</a>
                        </li>
                    
                        <li >
                            <a href="../../../background/specs/linux/index.html">Specs/Linux</a>
                        </li>
                    
                        <li >
                            <a href="../../../background/specs/misc/index.html">Specs/Misc</a>
                        </li>
                    
                        <li >
                            <a href="../../../background/specs/repositories-and-branches/index.html">Specs/Repositories And Branches</a>
                        </li>
                    
                        <li >
                            <a href="../../../background/specs/rootfs/index.html">Specs/Rootfs</a>
                        </li>
                    
                        <li >
                            <a href="../../../background/specs/toolchains/index.html">Specs/Toolchains</a>
                        </li>
                    
                        <li >
                            <a href="../../../background/specs/uboot/index.html">Specs/Uboot</a>
                        </li>
                    
                        <li >
                            <a href="../../../background/terminology/index.html">Terminology</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Troubleshooting <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../troubleshooting/index.html">Overview</a>
                        </li>
                    
                        <li >
                            <a href="../../default/entering-build-environment/index.html">Default/Entering Build Environment</a>
                        </li>
                    
                        <li >
                            <a href="../../local-testing/index.html">Local Testing</a>
                        </li>
                    
                        <li >
                            <a href="../entering-build-environment/index.html">Rootfs/Entering Build Environment</a>
                        </li>
                    
                        <li class="active">
                            <a href="index.html">Rootfs/Monitoring Package Installation</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Support <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../../support/contact-team/index.html">Contact Team</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                <li >
                    <a rel="next" href="../entering-build-environment/index.html">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../../../support/contact-team/index.html">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#monitoring-the-package-installation">Monitoring the Package Installation</a></li>
        
            <li><a href="#requirements">Requirements</a></li>
        
            <li><a href="#step-by-step-example">Step-By-Step Example</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="monitoring-the-package-installation">Monitoring the Package Installation</h1>
<p>If you're wondering what a step of the RootFS build routine is doing, you have
toe option of <a href="../../../entering-build-environment">entering the RootFS build
environment</a>. The reason for this is mainly
to check if the build is still ongoing, or if it got stuck at one point without
committing a failure.</p>
<h2 id="requirements">Requirements</h2>
<ul>
<li>SSH-Access to the host on which the buildslave containers are running</li>
<li>Permissions to run <code>docker</code> on the buildslave container host</li>
<li>Completed the steps of <a href="../entering-build-environment/index.html">entering the RootFS build
  environment</a>.</li>
</ul>
<h2 id="step-by-step-example">Step-By-Step Example</h2>
<p>This example demonstrates how to check the system load and the logs of the
running package installation.</p>
<ol>
<li>
<p>The example starts with already being logged into the SSHd inside the buildslave.</p>
<p><code>root@localhost ~ # arch</code></p>
<pre><code>armv7l
</code></pre>
</li>
<li>
<p>Use <code>top</code> to check the system load. Beforehand, you need to set the <code>TERM</code>
   environment variable, otherwise <code>top</code> will refuse to work.</p>
<p><code>root@localhost ~ # export TERM=vt200
root@localhost ~ # top</code></p>
<pre><code>top - 09:02:20 up 1 day, 18:11,  2 users,  load average: 1.80, 1.65, 1.61
Tasks:  88 total,   2 running,  86 sleeping,   0 stopped,   0 zombie
%Cpu(s): 97.8 us,  2.2 sy,  0.0 ni,  0.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st
KiB Mem:   1797116 total,  1453628 used,   343488 free,        8 buffers
KiB Swap:        0 total,        0 used,        0 free.  1004672 cached Mem
  PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND
  32287 portage   20   0  224688 209604  12852 R 94.4 11.7   1:43.17 cc1plus
  32302 root      20   0    3136   2116   1740 R  2.2  0.1   0:00.66 top
  32288 portage   20   0   10276   7676   2816 S  1.6  0.4   0:00.31 as
</code></pre>
<p>As we can see, <code>cc1plus</code> is occupying the CPU, which means that the build
process is very likely to be up and running!</p>
</li>
<li>
<p>We're interested in what package is being built.
   Therefore we have two options.</p>
<ul>
<li>
<p>Checking the <strong><em>emerge.log</em></strong> for output of the package managers main
      process. Use <code>tail</code> with you preferred arguments, this example just
      retrieves the 5 last lines in the file.</p>
<p><code>root@localhost ~ # tail -n5 /var/log/emerge.log</code></p>
<pre><code>1425868251:  === (113 of 122) Post-Build Cleaning
(app-editors/vim-7.4.273::/mnt/pkgdir/app-editors/vim-7.4.273.tbz2)
1425868251:  ::: completed emerge (113 of 122) app-editors/vim-7.4.273 to /
1425868252:  &gt;&gt;&gt; emerge (114 of 122) net-wireless/gnuradio-3.7.6.1-r2 to /
1425868252:  === (114 of 122) Cleaning
(net-wireless/gnuradio-3.7.6.1-r2::/usr/portage/net-wireless/gnuradio/gnuradio-
3.7.6.1-r2.ebuild)
1425868259:  === (114 of 122) Compiling/Packaging
(net-wireless/gnuradio-3.7.6.1-r2::/usr/portage/net-wireless/gnuradi
o/gnuradio-3.7.6.1-r2.ebuild)
</code></pre>
<p>The <strong><em>emerge.log</em></strong> shows that the package <em>net-wireless/gnuradio</em> is being
emerged.</p>
</li>
<li>
<p>Using the <code>genlop</code> utility. This also shows the runtime of the current
     build.</p>
<p><code>root@localhost ~ # genlop -ct</code></p>
<pre><code> Currently merging 114 out of 122
 * net-wireless/gnuradio-3.7.6.1-r2 
       current merge time: 8 hours, 31 minutes and 7 seconds.
       ETA: unknown.
</code></pre>
</li>
</ul>
</li>
<li>
<p>The next step shows how to monitor the output of the package build log. Those
   who are familiar with the <a href="../../../TODO">portage package manager</a> already know what
   to do. The example uses <code>tail</code> to continuously read the <strong><em>build.log</em></strong> and
   to initially display the most current line in in the <strong><em>build.log</em></strong>.</p>
<p><code>root@localhost ~ # tail -n1 -f /var/tmp/portage/net-wireless/gnuradio-3.7.6.1-r2/temp/build.log</code></p>
<pre><code>... first line of the file appears right after the command has been fired...
... second line appears eventually if the build is still running ...
... many more to follow if you wait long enough
</code></pre>
<p>The important information is not the output itself, but that the output is
changing after the command has been started. If the build process hung,
there would be no more output after the first line. This is not the case in
the example since there's a second line of output after a couple of seconds,
which showactivity of the ongoing build process. Keep in mind that the build
is proceeding very slowly when running inside a Virtual Machine. This means,
the time until the next line is emitted by the build process can easily
reach 30 seconds ore more.</p>
</li>
</ol>
</div>
        </div>

        

        <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script src="../../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../../js/prettify-1.0.min.js"></script>
        <script src="../../../js/base.js"></script>
    </body>
</html>