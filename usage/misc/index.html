<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">

        <title>Misc - embEDUx Project</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../css/prettify-1.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../../index.html">embEDUx Project</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Usage <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../usage/index.html">Overview</a>
                        </li>
                    
                        <li >
                            <a href="../common/build-monitoring/index.html">Common/Build Monitoring</a>
                        </li>
                    
                        <li >
                            <a href="../common/checkout-repositories/index.html">Common/Checkout Repositories</a>
                        </li>
                    
                        <li >
                            <a href="../common/repositories-and-branches/index.html">Common/Repositories And Branches</a>
                        </li>
                    
                        <li >
                            <a href="../uboot/index.html">Uboot</a>
                        </li>
                    
                        <li >
                            <a href="../toolchains/index.html">Toolchains</a>
                        </li>
                    
                        <li >
                            <a href="../linux/index.html">Linux</a>
                        </li>
                    
                        <li >
                            <a href="../rootfs/index.html">Rootfs</a>
                        </li>
                    
                        <li >
                            <a href="../rootfs/advanced/run-containers/index.html">Rootfs/Advanced/Run Containers</a>
                        </li>
                    
                        <li >
                            <a href="../rootfs/configuration.yml/index.html">Rootfs/Configuration.Yml</a>
                        </li>
                    
                        <li class="active">
                            <a href="index.html">Misc</a>
                        </li>
                    
                        <li >
                            <a href="../flashtool/index.html">Flashtool</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Setup <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../setup/setup/index.html">Overview</a>
                        </li>
                    
                        <li >
                            <a href="../../setup/common/buildmaster/index.html">Common/Buildmaster</a>
                        </li>
                    
                        <li >
                            <a href="../../setup/uboot/index.html">Uboot</a>
                        </li>
                    
                        <li >
                            <a href="../../setup/linux/index.html">Linux</a>
                        </li>
                    
                        <li >
                            <a href="../../setup/rootfs/index.html">Rootfs</a>
                        </li>
                    
                        <li >
                            <a href="../../setup/misc/index.html">Misc</a>
                        </li>
                    
                        <li >
                            <a href="../../setup/flashtool/index.html">Flashtool</a>
                        </li>
                    
                        <li >
                            <a href="../../setup/user-documentation/index.html">User Documentation</a>
                        </li>
                    
                        <li >
                            <a href="../../setup/examples/user-documentation-HTWG/index.html">Examples/User Documentation Htwg</a>
                        </li>
                    
                        <li >
                            <a href="../../setup/customization/buildslaves-add-packages/index.html">Customization/Buildslaves Add Packages</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Background <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../background/background/index.html">Overview</a>
                        </li>
                    
                        <li >
                            <a href="../../background/common/requirements/index.html">Common/Requirements</a>
                        </li>
                    
                        <li >
                            <a href="../../background/common/terminology/index.html">Common/Terminology</a>
                        </li>
                    
                        <li >
                            <a href="../../background/eval/buildserver/index.html">Eval/Buildserver</a>
                        </li>
                    
                        <li >
                            <a href="../../background/eval/yocto-project/index.html">Eval/Yocto Project</a>
                        </li>
                    
                        <li >
                            <a href="../../background/uboot/index.html">Uboot</a>
                        </li>
                    
                        <li >
                            <a href="../../background/toolchains/index.html">Toolchains</a>
                        </li>
                    
                        <li >
                            <a href="../../background/linux/index.html">Linux</a>
                        </li>
                    
                        <li >
                            <a href="../../background/rootfs/index.html">Rootfs</a>
                        </li>
                    
                        <li >
                            <a href="../../background/misc/index.html">Misc</a>
                        </li>
                    
                        <li >
                            <a href="../../background/flashtool/index.html">Flashtool</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Troubleshooting <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../troubleshooting/rootfs/entering-build-environment/index.html">Rootfs/Entering Build Environment</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                <li >
                    <a rel="next" href="../rootfs/configuration.yml/index.html">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../flashtool/index.html">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#miscellaneous-files">Miscellaneous files</a></li>
        
            <li><a href="#prerequisites">Prerequisites</a></li>
        
            <li><a href="#name-scheme">Name scheme</a></li>
        
            <li><a href="#add-new-platform">Add new platform</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="miscellaneous-files">Miscellaneous files</h1>
<p>This guide will help you through the steps to build archives, containing the
files for your boot and root partition of your desired platform.</p>
<p>The misc repository is necessary because in platforms require some files that
need to be present in the root or boot partition. However these file cant be
strictly assigned logically  to the <em>rootfs</em>,<em>linux</em> or <em>uboot</em> repository.</p>
<p>Two mandatory files are, which are always needed are:</p>
<ul>
<li>boot.scr: This boot script is required for <strong>U-Boot</strong> and needs to go on the
  boot partition.</li>
<li>inittab: This file is required by the operating system and needs to go on the
  root partition.</li>
</ul>
<p>The files have to be stored within the folder <strong><em>src_boot</em></strong> and <strong><em>src_root</em></strong>
and <strong>within their folder structure</strong>, so that the <a href="../../usage/misc/files/build">default build
script</a> can pack them in the required structure within
an archive.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>All of <a href="../usage/index.html#Prerequisites">the common prerequisites apply</a>.</p>
<h3 id="requirements">Requirements</h3>
<ul>
<li>
<p>User Documentation.</p>
<p>At the end of the setup, the Administrator is instructed to create the <a href="../../setup/user-documentation/index.html">User
Documentation</a>.</p>
</li>
<li>
<p>Git Repository <em>misc</em></p>
</li>
<li><strong>Buildserver</strong> setup for desired platform architecture</li>
</ul>
<h3 id="suggestions">Suggestions</h3>
<ul>
<li>
<p>Build/download a toolchain. This will allow you to test your build
  configuration before you push it upstream.</p>
</li>
<li>
<p>Have a look at the default build scripts. As the <strong>Buildserver</strong> just executes
  these scripts, you have no limits on what you want to do before, during and
  after the build process.</p>
</li>
</ul>
<h2 id="name-scheme">Name scheme</h2>
<p>The <strong>Builserver</strong> can only build your images, if you follow this name scheme
for any of the branches:</p>
<ul>
<li>&lt;platform-string></li>
</ul>
<p>Please look up the platform string in the <a href="../../setup/user-documentation/index.html">User
Documentation</a> provided by your administrator. If
your platform doesn't exist yet, please contact your administrator.</p>
<h2 id="add-new-platform">Add new platform</h2>
<p>To add a new platform following steps are required. As an example we will add
the raspberry pi platform to the <em>misc</em> repository.</p>
<ol>
<li>
<p>Clone the <em>linux</em> repository with the URL provided in the user documentation.</p>
<p><code>$ git@apu.in.htwg-konstanz.de:labworks-embEDUx/uboot.git</code></p>
</li>
<li>
<p>Add a new <em>platform</em> branch to the <em>misc</em> repository and push it upstream.
   This last step is required, so the <strong>Buildbot</strong> can start the build process
   at the end of this example.</p>
<p><code>$ git checkout master
$ git branch raspberry-pi
$ git checkout raspberry-pi
$ touch README.md
$ git add README.md
$ git commit -m "inital commit"
$ git push --set-upstream origin raspberry-pi</code></p>
</li>
<li>
<p>Add the <a href="../../usage/misc/files/build">default build script</a> to your <em>platform</em> branch and
   make it executable.</p>
<p><code>$ ls -hl
total 8.0K
-rwxr-xr-x 1 user user 939 Mar  2 19:35 build
-rw-r--r-- 1 user user   1 Mar  2 19:33 README.md</code></p>
</li>
<li>
<p>Add at least these two files and modify them to fit to to your platform.</p>
<p><code>$ mkdir src_boot
$ touch src_boot/boot.scr.txt
$ mkdir src_root
$ mkdir src_root/etc/
$ touch src_root/etc/inittab</code></p>
</li>
<li>
<p>The raspberry pi also needs some
   <a href="https://github.com/raspberrypi/firmware">firmware</a> blobs, present at boot,
   so we simply add these files to the <em>platform</em> branch in the <em>misc</em>
   repository.</p>
<p><code>$ ls -hl src_boot/
total 6.6M
-rw-r--r-- 1 user user  18K Mar  2 19:53 bootcode.bin
-rw-r--r-- 1 user user  307 Mar  2 19:53 boot.scr.txt
-rw-r--r-- 1 user user   18 Mar  2 19:53 config.txt
-rw-r--r-- 1 user user  19K Mar  2 19:53 COPYING.linux
-rw-r--r-- 1 user user 2.3K Mar  2 19:53 fixup_cd.dat
-rw-r--r-- 1 user user 6.0K Mar  2 19:53 fixup.dat
-rw-r--r-- 1 user user 9.0K Mar  2 19:53 fixup_x.dat
-rw-r--r-- 1 user user 1.5K Mar  2 19:53 LICENCE.broadcom
-rw-r--r-- 1 user user 525K Mar  2 19:53 start_cd.elf
-rw-r--r-- 1 user user 2.5M Mar  2 19:53 start.elf
-rw-r--r-- 1 user user 3.5M Mar  2 19:53 start_x.elf</code></p>
</li>
<li>
<p>Add all files to the repository, commit and push upstream.</p>
<p><code>$ git add build
$ git add src_boot
$ git add src_root
$ git commit -m "new platform"
$ git push</code></p>
</li>
<li>
<p>The <strong>Buildserver</strong> should start building your misc image now. For further
   informations on how to monitor the build check <a href="../common/build-monitoring/index.html">monitoring
   guide</a>.</p>
</li>
<li>
<p>Congratulations, you just built your first kernel for your first platform. If
   you have a <a href="../linux/index.html">linux</a>, a <a href="../uboot/index.html">uboot</a> and a <a href="../rootfs/index.html">rootfs</a>
   you can flash everything with the <strong>Flashtool</strong> or deploy your files manually
   (see <a href="../usage/index.html#hardware-deployment">Hardware Deployment</a>).</p>
</li>
</ol>
</div>
        </div>

        

        <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/prettify-1.0.min.js"></script>
        <script src="../../js/base.js"></script>
    </body>
</html>