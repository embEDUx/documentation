<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">

        <title>Implementation/Flashtool - embEDUx Project</title>

        <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../../css/prettify-1.0.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../../../index.html">embEDUx Project</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Usage <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../../usage/usage/index.html">Overview</a>
                        </li>
                    
                        <li >
                            <a href="../../../usage/common/build-monitoring/index.html">Common/Build Monitoring</a>
                        </li>
                    
                        <li >
                            <a href="../../../usage/uboot/index.html">Uboot</a>
                        </li>
                    
                        <li >
                            <a href="../../../usage/linux/index.html">Linux</a>
                        </li>
                    
                        <li >
                            <a href="../../../usage/rootfs/index.html">Rootfs</a>
                        </li>
                    
                        <li >
                            <a href="../../../usage/rootfs/advanced/run-containers/index.html">Rootfs/Advanced/Run Containers</a>
                        </li>
                    
                        <li >
                            <a href="../../../usage/rootfs/configuration.yml/index.html">Rootfs/Configuration.Yml</a>
                        </li>
                    
                        <li >
                            <a href="../../../usage/misc/index.html">Misc</a>
                        </li>
                    
                        <li >
                            <a href="../../../usage/flashtool/index.html">Flashtool</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Setup <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../../setup/setup/index.html">Overview</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/repositories/index.html">Repositories</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/adminstation/index.html">Adminstation</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/buildserver/index.html">Buildserver</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/buildserver/customize-buildslaves/index.html">Buildserver/Customize Buildslaves</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/buildserver/customize-supported-platforms/index.html">Buildserver/Customize Supported Platforms</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/post-install/toolchains/index.html">Post Install/Toolchains</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/post-install/user-documentation/index.html">Post Install/User Documentation</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/workstation/flashtool/index.html">Workstation/Flashtool</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/workstation/development/flashtool/index.html">Workstation/Development/Flashtool</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/examples/user-documentation-DEMO/index.html">Examples/User Documentation Demo</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/examples/user-documentation-HTWG/index.html">Examples/User Documentation Htwg</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Background <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../background/index.html">Overview</a>
                        </li>
                    
                        <li >
                            <a href="../../requirements/index.html">Requirements</a>
                        </li>
                    
                        <li >
                            <a href="../../design/index.html">Design</a>
                        </li>
                    
                        <li >
                            <a href="../../design/bootloader/index.html">Design/Bootloader</a>
                        </li>
                    
                        <li >
                            <a href="../../design/buildserver/index.html">Design/Buildserver</a>
                        </li>
                    
                        <li >
                            <a href="../../design/flashtool/index.html">Design/Flashtool</a>
                        </li>
                    
                        <li >
                            <a href="../../design/linux/index.html">Design/Linux</a>
                        </li>
                    
                        <li >
                            <a href="../../design/repositories/index.html">Design/Repositories</a>
                        </li>
                    
                        <li >
                            <a href="../../design/rootfs/index.html">Design/Rootfs</a>
                        </li>
                    
                        <li >
                            <a href="../../design/toolchain/index.html">Design/Toolchain</a>
                        </li>
                    
                        <li >
                            <a href="../../evaluation/index.html">Evaluation</a>
                        </li>
                    
                        <li >
                            <a href="../../evaluation/buildserver-setuproutine/index.html">Evaluation/Buildserver Setuproutine</a>
                        </li>
                    
                        <li >
                            <a href="../../evaluation/container-utility/index.html">Evaluation/Container Utility</a>
                        </li>
                    
                        <li >
                            <a href="../../evaluation/continuous-integration/index.html">Evaluation/Continuous Integration</a>
                        </li>
                    
                        <li >
                            <a href="../../evaluation/flashtool/index.html">Evaluation/Flashtool</a>
                        </li>
                    
                        <li >
                            <a href="../../evaluation/linux/index.html">Evaluation/Linux</a>
                        </li>
                    
                        <li >
                            <a href="../../evaluation/rootfs/index.html">Evaluation/Rootfs</a>
                        </li>
                    
                        <li >
                            <a href="../../evaluation/toolchain/index.html">Evaluation/Toolchain</a>
                        </li>
                    
                        <li >
                            <a href="../../evaluation/uboot/index.html">Evaluation/Uboot</a>
                        </li>
                    
                        <li >
                            <a href="../index.html">Implementation</a>
                        </li>
                    
                        <li >
                            <a href="../buildserver/index.html">Implementation/Buildserver</a>
                        </li>
                    
                        <li class="active">
                            <a href="index.html">Implementation/Flashtool</a>
                        </li>
                    
                        <li >
                            <a href="../linux/index.html">Implementation/Linux</a>
                        </li>
                    
                        <li >
                            <a href="../misc/index.html">Implementation/Misc</a>
                        </li>
                    
                        <li >
                            <a href="../repositories-and-branches/index.html">Implementation/Repositories And Branches</a>
                        </li>
                    
                        <li >
                            <a href="../rootfs/index.html">Implementation/Rootfs</a>
                        </li>
                    
                        <li >
                            <a href="../toolchain/index.html">Implementation/Toolchain</a>
                        </li>
                    
                        <li >
                            <a href="../uboot/index.html">Implementation/Uboot</a>
                        </li>
                    
                        <li >
                            <a href="../../terminology/index.html">Terminology</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Troubleshooting <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../../troubleshooting/troubleshooting/index.html">Overview</a>
                        </li>
                    
                        <li >
                            <a href="../../../troubleshooting/entering-build-environment/index.html">Entering Build Environment</a>
                        </li>
                    
                        <li >
                            <a href="../../../troubleshooting/faq/index.html">Faq</a>
                        </li>
                    
                        <li >
                            <a href="../../../troubleshooting/local-testing/index.html">Local Testing</a>
                        </li>
                    
                        <li >
                            <a href="../../../troubleshooting/rootfs/entering-build-environment/index.html">Rootfs/Entering Build Environment</a>
                        </li>
                    
                        <li >
                            <a href="../../../troubleshooting/rootfs/monitoring-package-installation/index.html">Rootfs/Monitoring Package Installation</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Support <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../../support/contact-team/index.html">Contact Team</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                <li >
                    <a rel="next" href="../buildserver/index.html">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../linux/index.html">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#specification-for-a-deployment-tool">Specification for a deployment tool</a></li>
        
            <li><a href="#flashtool-configuration-file-and-working-directory">Flashtool configuration file and working directory</a></li>
        
            <li><a href="#recipe-file-for-platforms">Recipe file for platforms</a></li>
        
            <li><a href="#retrieving-software-products">Retrieving software products</a></li>
        
            <li><a href="#list-of-feature">List of feature</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="specification-for-a-deployment-tool">Specification for a deployment tool</h1>
<p>This is the specification that has been worked out according to the <a href="../../design/flashtool/index.html">design of
the Flashtool</a>. </p>
<h2 id="flashtool-configuration-file-and-working-directory"><strong>Flashtool</strong> configuration file and working directory</h2>
<p>The configuration file for the <strong>Flashtool</strong> should be saved in a own working
directory for the <strong>Flashtool</strong>. This working directory can be set by the user
when the tool is initialized. When the user does not specify the working
directory it will be created in the <em>home</em> directory with the folder name
"<em>.flashtool</em>.</p>
<p>This working directory is used to save the configuration files for the
platforms and logging files of the <strong>Flashtool</strong>.</p>
<h2 id="recipe-file-for-platforms">Recipe file for platforms</h2>
<p>The configuration file for the platform act as recipe for the setup procedure.
The user should be able to define how to partition the storage device of the
platform and where the software packages should be loaded. </p>
<h3 id="language">Language</h3>
<p>The language of the recipe file is <em>YAML</em>. A recipe file must contain at least
one <em>YAML document</em>. Each <em>YAML document</em> specifies a recipe. So a recipe file
contains one or more recipes. Each recipe must have a python counterpart, which
ensures if all required settings are given and checks the values of the
settings.</p>
<pre><code>---
type : ${recipe type}

recipe:
    ${settings for recipe}
</code></pre>
<p>This example shows the basic structure of a recipe. Multiple recipes in a recipe
file must be divided by <code>---</code>.</p>
<h3 id="name-scheme">Name Scheme</h3>
<p>The name scheme of a recipe file must be as follows:</p>
<p><code>{platform name}.yml}</code>
or
<code>{platform name}_{identifier}.yml</code></p>
<p>The <em>platform name</em> and the <em>identifier</em> must not contain underscores. The
platform name must also exist on the buildserver configuration for the specific
platform. With the <em>identifier</em> it is possible to set multiple recipe files for
a platform.</p>
<h3 id="availability-of-predefined-recipe-files">Availability of predefined recipe files</h3>
<p>There must be a repository for recipe files which are set by the administrator.
This repository is a git repository and the URL to it must be configured in the
<strong>Flashtool</strong> configuration.</p>
<h3 id="user-defined-recipe-files">User defined recipe files</h3>
<p>It is also required to add a directory for the <strong>Flashtool</strong> where the user can
add own recipe files. This directory must be configured in the <strong>Flashtool</strong>
configuration.</p>
<h2 id="retrieving-software-products">Retrieving software products</h2>
<p>The built software product must be retrieved from the <strong>builbot</strong> web server.
The web server provides a <em>JSON api</em> to get all information about every built
which was made. This <em>JSON</em> information must be parsed by the <strong>Flashtool</strong> to get
all valid builds. The next list shows the paths which provide different
information about the <strong>buildbot master</strong> and which data is useful for the
<strong>Flashtool</strong>.</p>
<ul>
<li>
<p><code>/json</code></p>
<p>Get all supported platforms and which architecture the platform has. It also
gets the name of the builder for a specific architecture.</p>
<p><em>useful values</em> in json string ([i]: for each entry):</p>
<ul>
<li>builders[i]-&gt;basedir: builder name and architecture</li>
<li>builders[i]-&gt;schedulers: branch filter and platform name</li>
</ul>
</li>
<li>
<p><code>/json/builders/{builder name}/builds/-1</code></p>
<p>Get the last build of the builder.</p>
<p><em>useful values</em> in json string:</p>
<ul>
<li>number: build number</li>
</ul>
</li>
<li>
<p><code>/json/builders/{builder name}/builds/{build id}</code></p>
<p>Get information about a specific build. Check if build was successful and
save the following values for each successful build.</p>
<p><em>useful values</em> in json string:</p>
<ul>
<li>text: check for value <em>build</em> and <em>successful</em></li>
<li>properties-&gt;urls: path to the built files and product</li>
<li>properties-&gt;upload_files: Created files of the build</li>
</ul>
<p>With this information it is possible to create a download link for each
software product. The path is created by the following patterns:</p>
<pre><code>/{url}/{file name}
</code></pre>
</li>
</ul>
<h2 id="list-of-feature">List of feature</h2>
<p>The table below shows a quick overview of the features of the <strong>Flashtool</strong>.
A detailed description of the command can be found in the <a href="../../../usage/flashtool/index.html">usage
section</a> of the <strong>Flashtool</strong></p>
<table>
<thead>
<tr>
<th>command</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>init / config</td>
<td>Configure needed options for the <strong>Flashtool</strong>. Must be done as first step (init) and can be changed any time (config)</td>
</tr>
<tr>
<td>platform_recipes</td>
<td>Get or update platform recipes from git repository</td>
</tr>
<tr>
<td>list_platforms</td>
<td>Shows which platforms have a recipe file and can be set up</td>
</tr>
<tr>
<td>list_builds</td>
<td>List all versions of software components on the platform, grouped by platform and product type</td>
</tr>
<tr>
<td>setup</td>
<td>runs a deployment procedure for the specified platform</td>
</tr>
<tr>
<td>check_mmc</td>
<td>Does a filesystem check on every partition on a mmc media</td>
</tr>
</tbody>
</table>
</div>
        </div>

        

        <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script src="../../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../../js/prettify-1.0.min.js"></script>
        <script src="../../../js/base.js"></script>
    </body>
</html>