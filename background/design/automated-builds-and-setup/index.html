<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">

        <title>Design/Automated Builds And Setup - embEDUx Project</title>

        <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../../css/prettify-1.0.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../../../index.html">embEDUx Project</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Usage <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../../usage/usage/index.html">Overview</a>
                        </li>
                    
                        <li >
                            <a href="../../../usage/common/build-monitoring/index.html">Common/Build Monitoring</a>
                        </li>
                    
                        <li >
                            <a href="../../../usage/uboot/index.html">Uboot</a>
                        </li>
                    
                        <li >
                            <a href="../../../usage/linux/index.html">Linux</a>
                        </li>
                    
                        <li >
                            <a href="../../../usage/rootfs/index.html">Rootfs</a>
                        </li>
                    
                        <li >
                            <a href="../../../usage/rootfs/advanced/run-containers/index.html">Rootfs/Advanced/Run Containers</a>
                        </li>
                    
                        <li >
                            <a href="../../../usage/rootfs/configuration.yml/index.html">Rootfs/Configuration.Yml</a>
                        </li>
                    
                        <li >
                            <a href="../../../usage/misc/index.html">Misc</a>
                        </li>
                    
                        <li >
                            <a href="../../../usage/flashtool/index.html">Flashtool</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Setup <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../../setup/setup/index.html">Overview</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/repositories/index.html">Repositories</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/adminstation/index.html">Adminstation</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/buildserver/index.html">Buildserver</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/buildserver/buildmaster/index.html">Buildserver/Buildmaster</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/buildserver/buildslaves/index.html">Buildserver/Buildslaves</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/buildserver/customize-buildslaves/index.html">Buildserver/Customize Buildslaves</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/buildserver/customize-supported-platforms/index.html">Buildserver/Customize Supported Platforms</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/post-install/toolchains/index.html">Post Install/Toolchains</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/post-install/user-documentation/index.html">Post Install/User Documentation</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/workstation/flashtool/index.html">Workstation/Flashtool</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/workstation/development/flashtool/index.html">Workstation/Development/Flashtool</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/examples/user-documentation-DEMO/index.html">Examples/User Documentation Demo</a>
                        </li>
                    
                        <li >
                            <a href="../../../setup/examples/user-documentation-HTWG/index.html">Examples/User Documentation Htwg</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Background <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../background/index.html">Overview</a>
                        </li>
                    
                        <li >
                            <a href="../../buildserver/index.html">Buildserver</a>
                        </li>
                    
                        <li >
                            <a href="../../requirements/index.html">Requirements</a>
                        </li>
                    
                        <li >
                            <a href="../index.html">Design</a>
                        </li>
                    
                        <li class="active">
                            <a href="index.html">Design/Automated Builds And Setup</a>
                        </li>
                    
                        <li >
                            <a href="../bootloader/index.html">Design/Bootloader</a>
                        </li>
                    
                        <li >
                            <a href="../continuous-integration/index.html">Design/Continuous Integration</a>
                        </li>
                    
                        <li >
                            <a href="../flashtool/index.html">Design/Flashtool</a>
                        </li>
                    
                        <li >
                            <a href="../linux/index.html">Design/Linux</a>
                        </li>
                    
                        <li >
                            <a href="../repositories-and-branches/index.html">Design/Repositories And Branches</a>
                        </li>
                    
                        <li >
                            <a href="../rootfs/index.html">Design/Rootfs</a>
                        </li>
                    
                        <li >
                            <a href="../toolchain/index.html">Design/Toolchain</a>
                        </li>
                    
                        <li >
                            <a href="../../evaluation/index.html">Evaluation</a>
                        </li>
                    
                        <li >
                            <a href="../../evaluation/continuous-integration/index.html">Evaluation/Continuous Integration</a>
                        </li>
                    
                        <li >
                            <a href="../../evaluation/flashtool/index.html">Evaluation/Flashtool</a>
                        </li>
                    
                        <li >
                            <a href="../../evaluation/linux/index.html">Evaluation/Linux</a>
                        </li>
                    
                        <li >
                            <a href="../../evaluation/rootfs/index.html">Evaluation/Rootfs</a>
                        </li>
                    
                        <li >
                            <a href="../../evaluation/toolchain/index.html">Evaluation/Toolchain</a>
                        </li>
                    
                        <li >
                            <a href="../../evaluation/uboot/index.html">Evaluation/Uboot</a>
                        </li>
                    
                        <li >
                            <a href="../../buildmaster/index.html">Buildmaster</a>
                        </li>
                    
                        <li >
                            <a href="../../buildslaves/index.html">Buildslaves</a>
                        </li>
                    
                        <li >
                            <a href="../../implementation/flashtool/index.html">Implementation/Flashtool</a>
                        </li>
                    
                        <li >
                            <a href="../../implementation/linux/index.html">Implementation/Linux</a>
                        </li>
                    
                        <li >
                            <a href="../../implementation/misc/index.html">Implementation/Misc</a>
                        </li>
                    
                        <li >
                            <a href="../../implementation/repositories-and-branches/index.html">Implementation/Repositories And Branches</a>
                        </li>
                    
                        <li >
                            <a href="../../implementation/rootfs/index.html">Implementation/Rootfs</a>
                        </li>
                    
                        <li >
                            <a href="../../implementation/toolchains/index.html">Implementation/Toolchains</a>
                        </li>
                    
                        <li >
                            <a href="../../implementation/uboot/index.html">Implementation/Uboot</a>
                        </li>
                    
                        <li >
                            <a href="../../terminology/index.html">Terminology</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Troubleshooting <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../../troubleshooting/troubleshooting/index.html">Overview</a>
                        </li>
                    
                        <li >
                            <a href="../../../troubleshooting/entering-build-environment/index.html">Entering Build Environment</a>
                        </li>
                    
                        <li >
                            <a href="../../../troubleshooting/local-testing/index.html">Local Testing</a>
                        </li>
                    
                        <li >
                            <a href="../../../troubleshooting/rootfs/entering-build-environment/index.html">Rootfs/Entering Build Environment</a>
                        </li>
                    
                        <li >
                            <a href="../../../troubleshooting/rootfs/monitoring-package-installation/index.html">Rootfs/Monitoring Package Installation</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Support <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../../support/contact-team/index.html">Contact Team</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                <li >
                    <a rel="next" href="../index.html">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../bootloader/index.html">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#automated-builds-and-setup">Automated Builds and Setup</a></li>
        
            <li><a href="#automated-setup-routine">Automated Setup Routine</a></li>
        
    
        <li class="main "><a href="#abstraction-layer-for-automation">Abstraction Layer For Automation</a></li>
        
            <li><a href="#virtualization-machines">Virtualization Machines</a></li>
        
            <li><a href="#splitting-functionality-into-linux-containers">Splitting Functionality into Linux Containers</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="automated-builds-and-setup">Automated Builds and Setup</h1>
<h2 id="automated-setup-routine">Automated Setup Routine</h2>
<p>The buildserver will undoubtedly be a complex structure of software components.
To make the setup as easy as possible it should be automated as far as possible.</p>
<h3 id="required-setup-parameters">Required Setup Parameters</h3>
<p>The administrator should only have to configure the parameters that can't
possibly be known upfront, or are not convenient to be predefined. At this
point, these parameters include</p>
<ul>
<li>
<p>Buildserver Machine Address</p>
<p>The target machine shall by default run all containers that belong to the
buildsystem</p>
</li>
<li>
<p>Authentication credentials between system components</p>
<p>While this could in general be generated randomly, it is chosen to let the
user set the credentials for system internal communication.</p>
</li>
<li>
<p>Authentication credentials between the system components and the users</p>
<p>Default usernames and passwords are possible security holes, and should not
be provided by the setuproutine.</p>
</li>
</ul>
<h3 id="default-setup-parameters">Default Setup Parameters</h3>
<p>All other setup parameters should be provided as defaults by the setuproutine.</p>
<ul>
<li>
<p>Target Platform and Architectures</p>
<p>The platform names and their corresponding architecture.  The architectures
will be supported as build targets. By default, all tested platforms
will be available as supported. The user is not forced to use them, but it
is useful to already have working examples in the local installation.</p>
</li>
</ul>
<h3 id="configuration-generation-from-templates">Configuration Generation From Templates</h3>
<p>The user-provided and default setup parameters should be used to generate the
configuration files for the buildsystem. For commonly used changes, the
generator can be extended and can be utilized by beginners immediately.
Advanced users will still be able to modify the template if necessary.</p>
<h3 id="language-choice">Language Choice</h3>
<p>The setuproutine should be automated using an appropriate programming or
scripting language. The candidates for the task are:</p>
<ul>
<li>Shell</li>
<li>Python</li>
<li>Ansible</li>
</ul>
<p>The criteria must include:</p>
<ul>
<li>Reusable components availability</li>
<li>Code readability</li>
<li>Extensibility</li>
<li>Templating features</li>
</ul>
<h1 id="abstraction-layer-for-automation">Abstraction Layer For Automation</h1>
<p>In order to have an automated build system, all components should be setup and
run abstracted from the buildserver's host system as far as possible.
Abstraction methods make it possible to deploy and run complex infrastructures
without having to care about the underlying hardware and system configuration.</p>
<p>Possible technologies for abstracting applications and whole operating systems
include Virtual Machines and Linux Containers.</p>
<h2 id="virtualization-machines">Virtualization Machines</h2>
<p>Virtual Machines are completely abstracted from the host system's hardware.
They run on a so-called Hypervisor, which simulates a complete machine for the
target system. The target system runs it's own kernel, and needs to boot and
initialize an Operating System from scratch. Security is considered very high,
since the Hypervisor has full control over soft- and hardware-resources that are
passed to the guest system.   The architecture of an operating system inside a
virtual machine can be completely different to the host architecture, and thus
is highly portable.  Depending on available acceleration technologies, the
performance of the virtual CPU, RAM and disk can suffer significantly.</p>
<h3 id="linux-containers">Linux Containers</h3>
<p>Linux Containers utilize a feature in recent Linux Kernels which allow
separating processes from each other. This includes the separation of host and
contained processes, as well as different contained processes from each other.
These contained processes can be an initialization processes to boot a
different Linux System on the running host Linux kernel, or simply any other
application available. Recently there has been a lot of development and
activity on Linux Containers in the community, namely because of a software
called Docker.  Security is highly dependent on the implementation of the
process separating that happens in the host kernel.   The host kernel must
obviously be able to run the contained application.  Therefore, the
application must either be in the host's native or compatible executable
format, or the system needs an emulator to run the foreign architecture. The
performance for contained processes does not differ significantly compared to
a regular running process. This is not entirely true for executables that
require emulation because the CPU instructions must be translated before they
can be run.</p>
<h3 id="choosing-linux-containers">Choosing Linux-Containers</h3>
<p>In favor of speed (see <a href="http://domino.research.ibm.com/library/cyberdig.nsf/papers/0929052195DD819C85257D2300681E7B/$File/rc25482.pdf">Comparison of VM and Linux
Containers</a>)
container technologies should be chosen as the base for the buildsystem
components. In environments where security is a high requirement, the containers
can live inside a virtual machine, but that is beyond the design for the
buildsystem itself.</p>
<h2 id="splitting-functionality-into-linux-containers">Splitting Functionality into Linux Containers</h2>
<p>Performance wise, containers are relatively cheap entities for the system. This
allows the buildsystem to be split into several containers for the different
parts of the buildsystem, without losing performance over a flat installation on
the system. The container infrastructure could split the following
functionalities</p>
<ul>
<li>
<p>One Buildmaster</p>
<p>Running with native buildserver host architecture, and has the following
responsibilities</p>
<ul>
<li>Watch all the product repositories for changes</li>
<li>Delegate build processes to buildslaves on changes</li>
<li>Buildslaves with target architecture specific build tools</li>
</ul>
<p>Runs emulated or natively with the target architecture, and has the
following target archtecture specific components:</p>
<ul>
<li>Toolchain</li>
<li>Compiler flags</li>
<li>Base system archive</li>
</ul>
</li>
</ul>
<h3 id="container-management-software">Container Management Software</h3>
<p>The choice of the container management software still needs to be evaluated, but in favor
of popularity Docker should be the main candidate. Candidates:</p>
<ul>
<li>Docker</li>
<li>LXC</li>
<li>OpenVZ</li>
</ul>
</div>
        </div>

        

        <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script src="../../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../../js/prettify-1.0.min.js"></script>
        <script src="../../../js/base.js"></script>
    </body>
</html>